<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>MVC Distilled</title>
		<script>
			function Counter() {
				this.value = 0;
				this.observers = [];
								
				this.increment = function() {
					this.value++;
					this.notifyObservers();
				}
				this.addObserver = function(o) {
					this.observers.push(o);
				}
				this.notifyObservers = function() {
					var self = this;
					this.observers.forEach(function(o) {
						o(self);
					})
				}
			}
			
			var counter = new Counter();
			counter.addObserver(function(cnt) {
				document.getElementById('view00').innerHTML = 'Counter value is <strong>' + cnt.value + '</strong>';;
			});
			
			counter.addObserver(function(cnt) {
				document.getElementById('view01').innerHTML = 'Counter value % 2 is <strong>' + (cnt.value % 2) + '</strong>';;
			});
			
			function handleClick() {
				console.log('Clicked');
				counter.increment();
			}
			
			function handleLoad() {
				counter.notifyObservers();
			}
		</script>
	</head>
	<body onload="handleLoad()">
		<h1>MVC Distilled</h1>
		<div id="view00"></div>
		<div id="view01"></div>
		<div id="view02"><button onclick="handleClick()">+</button></div>
	</body>
</html>